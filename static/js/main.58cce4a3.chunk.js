(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{113:function(e,t,n){e.exports={App:"App_App__3Yzea"}},116:function(e,t,n){e.exports={wrapper:"Login_wrapper__31AdJ"}},122:function(e,t,n){e.exports={"lds-grid":"Loader_lds-grid__GrKkF"}},123:function(e,t,n){e.exports={container:"MainPage_container__20tSO"}},130:function(e,t,n){},189:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(15),c=n.n(r),i=(n(130),n(113)),s=n.n(i),o=(n(131),n(59)),l=n.n(o),u=n(114);function d(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return[e,{resultCode:t,messages:a,data:{userId:n}}]}new(n.n(u).a)(l.a).onPost("/auth").reply((function(e){var t,n,a;return e.data&&(a=JSON.parse(e.data)),"test"===(null===(t=a)||void 0===t?void 0:t.username)&&"666666"===(null===(n=a)||void 0===n?void 0:n.password)?d(200,0,1):d(200,1,null,["Wrong authorization data"])}));var j=n(68),b=function(){return Object(j.b)()},f=j.c,p=n(5),O=n(2),h=n(40),x=n(30),v=n(87);function m(e){return e?void 0:"This field is required"}var g=n(95),w=n.n(g),y=n(116),T=n.n(y),S=n(12),C=n(117),E=n(23),A=Object(E.c)({name:"authorization",initialState:{isAuthorized:!1,errMessage:""},reducers:{authSucceeded:function(e){e.isAuthorized=!0,e.errMessage=""},authFailed:function(e,t){e.isAuthorized=!1,e.errMessage=t.payload},cleanErrMessageField:function(e){e.errMessage=""}}}),_=A.actions,k=_.authSucceeded,F=_.authFailed,P=_.cleanErrMessageField,N=A.reducer,I=n(1);var R=function(){var e=f((function(e){return e.authorization.errMessage})),t=b(),n=Object(a.useState)(!1),r=Object(S.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){e&&i(!0)}),[e]),c?Object(I.jsx)(C.a,{variant:"danger",onClose:function(){i(!1),t(P())},dismissible:!0,children:e}):null},L="AUTHORIZATION_REQUESTED",B="PUT_TRANSACTIONS_REQUESTED",D="CHANGE_TRANSACTION_STATUS_REQUESTED",M="DELETE_TRANSACTION_REQUESTED",z=[{value:"Pending",label:"Pending"},{value:"Completed",label:"Completed"},{value:"Cancelled",label:"Cancelled"}],q=[{value:"Refill",label:"Refill"},{value:"Withdrawal",label:"Withdrawal"}],W=Object(E.b)(L),H=Object(E.b)(M),U=Object(E.b)(D),Q=Object(E.b)(B),G=["placement","arrowProps","show","popper"],J=["placement","arrowProps","show","popper"],V=function(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(null),r=b();return Object(I.jsxs)("div",{className:T.a.wrapper,children:[Object(I.jsx)("div",{style:{position:"absolute",bottom:10,right:10},children:Object(I.jsx)(R,{})}),Object(I.jsx)(v.b,{onSubmit:function(e){r(W(e))},render:function(e){var a,r=e.handleSubmit,c=e.invalid,i=e.submitting;return Object(I.jsxs)(h.a,{onSubmit:r,children:[Object(I.jsx)(v.a,{validate:m,name:"username",render:function(e){var n=e.input,a=e.meta;return Object(I.jsxs)("div",{style:{textAlign:"left",fontWeight:"bold"},children:[Object(I.jsxs)(h.a.Group,{className:"mb-3",controlId:"username",children:[Object(I.jsx)(h.a.Label,{children:"Username"}),Object(I.jsx)(h.a.Control,Object(O.a)(Object(O.a)({ref:t},n),{},{placeholder:"Username"}))]}),a.touched&&a.error&&Object(I.jsx)(w.a,{target:t.current,show:!0,placement:"right",children:function(e){e.placement,e.arrowProps,e.show,e.popper;var t=Object(p.a)(e,G);return Object(I.jsx)("div",Object(O.a)(Object(O.a)({},t),{},{style:Object(O.a)({backgroundColor:"rgba(255, 100, 100, 0.85)",padding:"2px 10px",color:"white",borderRadius:3},t.style),children:a.error}))}})]})}}),Object(I.jsx)(v.a,{validate:(a=4,function(e){var t;return(e=null!==(t=e)&&void 0!==t?t:"").length>a?void 0:"Min. length for this Field at least ".concat(a," char.")}),name:"password",render:function(e){var t=e.input,a=e.meta;return Object(I.jsxs)("div",{style:{textAlign:"left",fontWeight:"bold"},children:[Object(I.jsxs)(h.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(I.jsx)(h.a.Label,{children:"Password"}),Object(I.jsx)(h.a.Control,Object(O.a)(Object(O.a)({ref:n},t),{},{type:"password",placeholder:"Password"}))]}),a.touched&&a.error&&Object(I.jsx)(w.a,{target:n.current,show:!0,placement:"right",children:function(e){e.placement,e.arrowProps,e.show,e.popper;var t=Object(p.a)(e,J);return Object(I.jsx)("div",Object(O.a)(Object(O.a)({},t),{},{style:Object(O.a)({backgroundColor:"rgba(255, 100, 100, 0.85)",padding:"2px 10px",color:"white",borderRadius:3},t.style),children:a.error}))}})]})}}),Object(I.jsx)(x.a,{variant:"primary",type:"submit",disabled:i||c,children:"Login"})]})}})]})};var Y=function(e){return function(){var t=f((function(e){return e.authorization.isAuthorized}));return Object(I.jsx)("div",{children:t?Object(I.jsx)(e,{}):Object(I.jsx)(V,{})})}},K=n(81),Z=n.n(K),X=n(82),$=n.n(X),ee=Object(E.c)({name:"transactions",initialState:{transactionStatus:"initial",currentTablePage:1,totalAmountEntriesOfTheTable:0,transactionListByStatus:{Cancelled:{1:{Amount:"",ClientName:"",Status:"Completed",TransactionId:"",Type:"Withdrawal"}},Completed:{1:{Amount:"",ClientName:"",Status:"Completed",TransactionId:"",Type:"Withdrawal"}},Pending:{1:{Amount:"",ClientName:"",Status:"Completed",TransactionId:"",Type:"Withdrawal"}}},statusFilters:["Completed","Cancelled","Pending"],typeFilters:["Withdrawal","Refill"]},reducers:{saveFilteredTransactionsToState:function(e,t){e.transactionListByStatus=t.payload,e.transactionStatus="imported"},changeCurrentTablePage:function(e,t){e.currentTablePage=t.payload},awaitingForData:function(e){e.transactionStatus="importing"},defineStatusFilters:function(e,t){e.statusFilters=t.payload},defineTypeFilters:function(e,t){e.typeFilters=t.payload},defineTotalAmountEntriesOfTheTable:function(e,t){e.totalAmountEntriesOfTheTable=t.payload},changeTransactionStatus:function(e,t){var n=t.payload.TransactionId,a=t.payload.Status,r={Amount:"",ClientName:"",Status:"Completed",TransactionId:"",Type:"Withdrawal"};["Completed","Cancelled","Pending"].filter((function(e){return e!==a})).forEach((function(t){e.transactionListByStatus[t][n]&&(r=Object(O.a)(Object(O.a)({},e.transactionListByStatus[t][n]),{},{Status:a}),delete e.transactionListByStatus[t][n])})),e.transactionListByStatus[a][n]=r},deleteTransaction:function(e,t){var n=t.payload;["Completed","Cancelled","Pending"].forEach((function(t){delete e.transactionListByStatus[t][n]}))}}}),te=ee.actions,ne=te.saveFilteredTransactionsToState,ae=te.changeCurrentTablePage,re=te.awaitingForData,ce=te.defineStatusFilters,ie=te.defineTypeFilters,se=te.defineTotalAmountEntriesOfTheTable,oe=te.changeTransactionStatus,le=te.deleteTransaction,ue=ee.reducer,de=Object(E.c)({name:"fileBlobSlice",initialState:{fileRequested:!1,filesList:[]},reducers:{fileRequestStarted:function(e){e.fileRequested=!0},fileRequestFinished:function(e){e.fileRequested=!1},updateFileList:function(e,t){e.filesList.push(t.payload)}}}),je=de.actions,be=je.fileRequestStarted,fe=je.fileRequestFinished,pe=je.updateFileList,Oe=de.reducer;var he=function(){var e=Object(a.useState)(!1),t=Object(S.a)(e,2),n=t[0],r=t[1],c=Object(a.useRef)(null),i=b();return Object(I.jsxs)("span",{children:[Object(I.jsx)("input",{accept:".csv",onChange:function(e){var t;(null===(t=e.currentTarget.files)||void 0===t?void 0:t.length)&&(r(!0),i(re()),i(pe(e.currentTarget.files[0].name)),Z.a.parse(e.currentTarget.files[0],{complete:function(e){r(!1),i(Q(e.data))},delimiter:",",header:!0,worker:!0}))},ref:c,style:{visibility:"hidden",position:"fixed"},type:"file"}),Object(I.jsx)($.a,{className:"m-1",variant:"primary",disabled:n,onClick:function(){var e;n||null===(e=c.current)||void 0===e||e.click()},children:n?"Importing\u2026":"Import"})]})},xe=n(121),ve=n(119),me=n(27),ge=n(70),we=n(69);var ye=function(e){var t=e.status,n=e.setStatus;return Object(I.jsx)(ge.a,{classNamePrefix:"react-select",closeMenuOnSelect:!0,components:Object(we.a)(),defaultValue:z.filter((function(e){return e.value===t})),options:z,onChange:function(e){n(e.value)}})};var Te=function(e){var t=e.id,n=e.show,r=e.setShow,c=e.status,i=b(),s=Object(a.useState)(c),o=Object(S.a)(s,2),l=o[0],u=o[1],d=function(){return r(!1)};return Object(I.jsxs)(me.a,{show:n,onHide:d,children:[Object(I.jsx)(me.a.Header,{closeButton:!0,children:Object(I.jsxs)(me.a.Title,{children:["Transaction ID: ",t,"."]})}),Object(I.jsxs)(me.a.Body,{children:[Object(I.jsx)("span",{className:"font-weight-bold",children:"Edit status:"}),Object(I.jsx)(ye,{status:l,setStatus:u})]}),Object(I.jsxs)(me.a.Footer,{children:[Object(I.jsx)(x.a,{variant:"secondary",onClick:d,children:"Close"}),Object(I.jsx)(x.a,{variant:"primary",onClick:function(){if(l!==c){var e={Status:l,TransactionId:String(t)};i(U(e))}r(!1)},children:"Save Changes"})]})]})};var Se=function(e){var t=e.id,n=e.show,a=e.setShow,r=b(),c=function(){return a(!1)};return Object(I.jsxs)(me.a,{show:n,onHide:c,children:[Object(I.jsx)(me.a.Header,{closeButton:!0,children:Object(I.jsx)(me.a.Title,{children:"Confirmation needed"})}),Object(I.jsx)(me.a.Body,{children:Object(I.jsxs)("span",{className:"font-weight-bold",children:["Are you sure you want irreversibly Delete Transaction with id ",t,"?"]})}),Object(I.jsxs)(me.a.Footer,{children:[Object(I.jsx)(x.a,{variant:"primary",onClick:c,children:"CANCEL"}),Object(I.jsx)(x.a,{variant:"danger",onClick:function(){r(H(String(t))),a(!1)},children:"DELETE"})]})]})};var Ce=function(e){var t=e.id,n=e.status,r=Object(a.useState)(!1),c=Object(S.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)(!1),l=Object(S.a)(o,2),u=l[0],d=l[1];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(ve.a,{size:"sm",children:[Object(I.jsx)(x.a,{variant:"primary",onClick:function(){s(!0)},children:"Edit"}),Object(I.jsx)(x.a,{variant:"danger",onClick:function(){d(!0)},children:"Delete"})]}),Object(I.jsx)(Te,{status:n,show:i,setShow:s,id:t}),Object(I.jsx)(Se,{id:t,show:u,setShow:d})]})},Ee=n(120);var Ae=function(){var e=b(),t=f((function(e){return e.transactions.transactionListByStatus})),n=f((function(e){return e.fileBlob.fileRequested})),r=f((function(e){return e.transactions.statusFilters})),c=f((function(e){return e.transactions.typeFilters})),i={};r.forEach((function(e){if(2===c.length)i=Object(O.a)(Object(O.a)({},i),t[e]);else{var n=Object.entries(t[e]).filter((function(e){return e[1].Type===c[0]}));i=Object(O.a)(Object(O.a)({},i),Object.fromEntries(n))}}));var s=Object.values(i);Object(a.useEffect)((function(){if(n){var t=Z.a.unparse(s),a=new Blob([t],{type:"text/plain;charset=utf-8"});Object(Ee.saveAs)(a,"transaction.csv"),e(fe())}}),[n]),Object(a.useEffect)((function(){e(se(s.length))}));var o=f((function(e){return e.transactions.currentTablePage})),l=[],u=s.slice(10*(o-1),10*o).map((function(e){var t=Object.values(e).map((function(e,t){return Object(I.jsx)("td",{children:e},e+String(o-1)+String(t))}));return Object(I.jsxs)("tr",{children:[t,Object(I.jsx)("td",{children:Object(I.jsx)(Ce,{status:e.Status,id:+e.TransactionId})})]},e.TransactionId+"trt")}));return s.length&&(l=Object.keys(s[0]).map((function(e,t){return Object(I.jsx)("th",{children:e},e+t)}))),Object(I.jsxs)(xe.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(I.jsx)("thead",{children:Object(I.jsxs)("tr",{children:[l,Object(I.jsx)("th",{children:"Action"})]})}),Object(I.jsx)("tbody",{children:u})]})},_e=n(36);var ke=function(){var e=b(),t=f((function(e){return e.transactions.currentTablePage})),n=f((function(e){return e.transactions.totalAmountEntriesOfTheTable})),r=Math.ceil(n/10);Object(a.useEffect)((function(){t>r&&e(ae(0===r?1:r))}),[r]);for(var c=[],i=function(e){return e<1||e>r?"continue|newIteration":void c.push(Object(I.jsx)(_e.a.Item,{onClick:function(){return o(e)},active:e===t,children:e},e+"hgfh"))},s=t-3;s<=t+3;s++)i(s);function o(t){e(ae(t))}return t<r-3&&r>3&&(t<r-4&&c.push(Object(I.jsx)(_e.a.Ellipsis,{},"Ellipsis")),c.push(Object(I.jsx)(_e.a.Item,{onClick:function(){return o(r)},children:r},r+"totalAmountOfPages"))),Object(I.jsxs)(_e.a,{children:[Object(I.jsx)(_e.a.First,{onClick:function(){return e(ae(1))}}),Object(I.jsx)(_e.a.Prev,{onClick:function(){t>1&&e(ae(t-1))}}),c,Object(I.jsx)(_e.a.Next,{onClick:function(){t<r&&e(ae(t+1))}}),Object(I.jsx)(_e.a.Last,{onClick:function(){return e(ae(r))}})]})},Fe=n(122),Pe=n.n(Fe);var Ne=function(){return Object(I.jsxs)("div",{className:Pe.a["lds-grid"],children:[Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{})]})};var Ie=function(e){return function(){var t=f((function(e){return e.transactions.transactionStatus}));return"initial"===t?Object(I.jsx)("div",{children:"Please import *.csv file to start work"}):"importing"===t?Object(I.jsx)("div",{children:Object(I.jsx)(Ne,{})}):"imported"===t?Object(I.jsx)(e,{}):null}}((function(){return Object(I.jsxs)("div",{children:[Object(I.jsx)(Ae,{}),Object(I.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(I.jsx)(ke,{})})]})})),Re=n(71),Le=n.n(Re);var Be=function(){var e=b();return Object(I.jsxs)("div",{children:[Object(I.jsx)(ge.a,{className:Le.a["react-select--inline"],classNamePrefix:Le.a["react-select"],closeMenuOnSelect:!1,components:Object(we.a)(),defaultValue:z,isMulti:!0,options:z,onChange:function(t){var n=null===t||void 0===t?void 0:t.map((function(e){return e.value}));e(ce(n))}}),Object(I.jsx)(ge.a,{className:Le.a["react-select--inline"],classNamePrefix:Le.a["react-select"],closeMenuOnSelect:!1,components:Object(we.a)(),defaultValue:q,isMulti:!0,options:q,onChange:function(t){var n=null===t||void 0===t?void 0:t.map((function(e){return e.value}));e(ie(n))}})]})};var De=function(){var e=b(),t=f((function(e){return e.fileBlob.fileRequested}));return Object(I.jsx)($.a,{variant:"primary",disabled:t,onClick:function(){e(be())},children:t?"Exporting\u2026":"Export"})},Me=n(96);var ze=function(){var e=f((function(e){return e.fileBlob.filesList})).map((function(e,t){return Object(I.jsx)(Me.a.Item,{action:!0,variant:"light",children:e},e+t)}));return Object(I.jsx)(Me.a,{className:"mh-100",children:e})},qe=n(123),We=n.n(qe),He=Y((function(){return Object(I.jsxs)("div",{className:We.a.container,children:[Object(I.jsx)("header",{children:"Application Header"}),Object(I.jsxs)("nav",{children:[Object(I.jsx)("section",{children:Object(I.jsx)(Be,{})}),Object(I.jsxs)("section",{children:[Object(I.jsx)(he,{})," ",Object(I.jsx)(De,{})]})]}),Object(I.jsx)("main",{children:Object(I.jsx)(Ie,{})}),Object(I.jsx)("aside",{children:Object(I.jsx)(ze,{})})]})}));var Ue=function(){return Object(I.jsx)("div",{className:s.a.App,children:Object(I.jsx)(He,{})})},Qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,195)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},Ge=n(125),Je=n(124),Ve=n(24),Ye=n.n(Ve),Ke=n(32),Ze=n(57),Xe=Ye.a.mark(at),$e=Ye.a.mark(rt),et=Ye.a.mark(ct),tt=Ye.a.mark(it),nt=Ye.a.mark(st);function at(e){var t;return Ye.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Ke.a)(ot,e.payload);case 3:if(0===(t=n.sent).resultCode){n.next=6;break}throw new Error(t.messages[0]);case 6:return n.next=8,Object(Ke.b)(k());case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(Ke.b)(F(n.t0.message));case 14:case"end":return n.stop()}}),Xe,null,[[0,10]])}function rt(e){var t,n,a,r,c;return Ye.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t=new Ze.b.Entity("Pending",{},{idAttribute:"TransactionId"}),n=new Ze.b.Entity("Completed",{},{idAttribute:"TransactionId"}),a=new Ze.b.Entity("Cancelled",{},{idAttribute:"TransactionId"}),r=new Ze.b.Array({Pending:t,Completed:n,Cancelled:a},(function(e){return"".concat(e.Status)})),c=Object(Ze.a)(e.payload,r),i.next=8,Object(Ke.b)(ne(c.entities));case 8:i.next=14;break;case 10:return i.prev=10,i.t0=i.catch(0),i.next=14,alert(i.t0.message);case 14:case"end":return i.stop()}}),$e,null,[[0,10]])}function ct(e){return Ye.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Ke.b)(oe(e.payload));case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,alert(t.t0.message);case 9:case"end":return t.stop()}}),et,null,[[0,5]])}function it(e){return Ye.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Ke.b)(le(e.payload));case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,alert(t.t0.message);case 9:case"end":return t.stop()}}),tt,null,[[0,5]])}function st(){return Ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ke.c)(L,at);case 2:return e.next=4,Object(Ke.c)(B,rt);case 4:return e.next=6,Object(Ke.c)(D,ct);case 6:return e.next=8,Object(Ke.c)(M,it);case 8:case"end":return e.stop()}}),nt)}function ot(e){return lt.apply(this,arguments)}function lt(){return(lt=Object(Je.a)(Ye.a.mark((function e(t){var n;return Ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("auth",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ut=st,dt=Object(Ge.a)(),jt=Object(E.a)({reducer:{authorization:N,transactions:ue,fileBlob:Oe},middleware:function(e){return e().concat(dt)}});dt.run(ut),c.a.render(Object(I.jsx)(j.a,{store:jt,children:Object(I.jsx)(Ue,{})}),document.getElementById("root")),Qe()},71:function(e,t,n){e.exports={"react-select--inline":"Dropdowns_react-select--inline__1nQd6","react-select__control":"Dropdowns_react-select__control__1NkYD","react-select__single-value":"Dropdowns_react-select__single-value__3HlHa"}}},[[189,1,2]]]);
//# sourceMappingURL=main.58cce4a3.chunk.js.map