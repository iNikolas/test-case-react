(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{113:function(e,t,n){e.exports={App:"App_App__3Yzea"}},116:function(e,t,n){e.exports={wrapper:"Login_wrapper__31AdJ"}},122:function(e,t,n){e.exports={"lds-grid":"Loader_lds-grid__GrKkF"}},123:function(e,t,n){e.exports={container:"MainPage_container__20tSO"}},130:function(e,t,n){},189:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),i=n.n(c),s=(n(130),n(113)),o=n.n(s),l=(n(131),n(59)),u=n.n(l),d=n(114);function j(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return[e,{resultCode:t,messages:a,data:{userId:n}}]}new(n.n(d).a)(u.a).onPost("/auth").reply((function(e){var t,n,a;return e.data&&(a=JSON.parse(e.data)),"test"===(null===(t=a)||void 0===t?void 0:t.username)&&"666666"===(null===(n=a)||void 0===n?void 0:n.password)?j(200,0,1):j(200,1,null,["Wrong authorization data"])}));var b=n(68),f=function(){return Object(b.b)()},O=b.c,p=n(5),h=n(2),x=n(41),v=n(31),m=n(87);function g(e){return e?void 0:"This field is required"}var w=n(95),T=n.n(w),y=n(116),S=n.n(y),C=n(12),E=n(117),A=n(24),_=Object(A.c)({name:"authorization",initialState:{isAuthorized:!1,errMessage:""},reducers:{authSucceeded:function(e){e.isAuthorized=!0,e.errMessage=""},authFailed:function(e,t){e.isAuthorized=!1,e.errMessage=t.payload},cleanErrMessageField:function(e){e.errMessage=""}}}),k=_.actions,F=k.authSucceeded,P=k.authFailed,L=k.cleanErrMessageField,I=_.reducer,R=n(1);var N=function(){var e=O((function(e){return e.authorization.errMessage})),t=f(),n=Object(a.useState)(!1),r=Object(C.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){e&&i(!0)}),[e]),c?Object(R.jsx)(E.a,{variant:"danger",onClose:function(){i(!1),t(L())},dismissible:!0,children:e}):null},B="AUTHORIZATION_REQUESTED",D="PUT_TRANSACTIONS_REQUESTED",M="CHANGE_TRANSACTION_STATUS_REQUESTED",z="DELETE_TRANSACTION_REQUESTED",q=[{value:"Pending",label:"Pending"},{value:"Completed",label:"Completed"},{value:"Cancelled",label:"Cancelled"}],H=[{value:"Refill",label:"Refill"},{value:"Withdrawal",label:"Withdrawal"}],U=Object(A.b)(B),W=Object(A.b)(z),Q=Object(A.b)(M),G=Object(A.b)(D),J=["placement","arrowProps","show","popper"],V=["placement","arrowProps","show","popper"],Y=function(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(null),r=f();return Object(R.jsxs)("div",{className:S.a.wrapper,children:[Object(R.jsx)("div",{style:{position:"absolute",bottom:10,right:10},children:Object(R.jsx)(N,{})}),Object(R.jsx)(m.b,{onSubmit:function(e){r(U(e))},render:function(e){var a,r=e.handleSubmit,c=e.invalid,i=e.submitting;return Object(R.jsxs)(x.a,{onSubmit:r,children:[Object(R.jsx)(m.a,{validate:g,name:"username",render:function(e){var n=e.input,a=e.meta;return Object(R.jsxs)("div",{style:{textAlign:"left",fontWeight:"bold"},children:[Object(R.jsxs)(x.a.Group,{className:"mb-3",controlId:"username",children:[Object(R.jsx)(x.a.Label,{children:"Username"}),Object(R.jsx)(x.a.Control,Object(h.a)(Object(h.a)({ref:t},n),{},{placeholder:"Username"}))]}),a.touched&&a.error&&Object(R.jsx)(T.a,{target:t.current,show:!0,placement:"right",children:function(e){e.placement,e.arrowProps,e.show,e.popper;var t=Object(p.a)(e,J);return Object(R.jsx)("div",Object(h.a)(Object(h.a)({},t),{},{style:Object(h.a)({backgroundColor:"rgba(255, 100, 100, 0.85)",padding:"2px 10px",color:"white",borderRadius:3},t.style),children:a.error}))}})]})}}),Object(R.jsx)(m.a,{validate:(a=4,function(e){var t;return(e=null!==(t=e)&&void 0!==t?t:"").length>a?void 0:"Min. length for this Field at least ".concat(a," char.")}),name:"password",render:function(e){var t=e.input,a=e.meta;return Object(R.jsxs)("div",{style:{textAlign:"left",fontWeight:"bold"},children:[Object(R.jsxs)(x.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(R.jsx)(x.a.Label,{children:"Password"}),Object(R.jsx)(x.a.Control,Object(h.a)(Object(h.a)({ref:n},t),{},{type:"password",placeholder:"Password"}))]}),a.touched&&a.error&&Object(R.jsx)(T.a,{target:n.current,show:!0,placement:"right",children:function(e){e.placement,e.arrowProps,e.show,e.popper;var t=Object(p.a)(e,V);return Object(R.jsx)("div",Object(h.a)(Object(h.a)({},t),{},{style:Object(h.a)({backgroundColor:"rgba(255, 100, 100, 0.85)",padding:"2px 10px",color:"white",borderRadius:3},t.style),children:a.error}))}})]})}}),Object(R.jsx)(v.a,{variant:"primary",type:"submit",disabled:i||c,children:"Login"})]})}})]})};var K=function(e){return function(){var t=O((function(e){return e.authorization.isAuthorized}));return Object(R.jsx)("div",{children:t?Object(R.jsx)(e,{}):Object(R.jsx)(Y,{})})}},Z=n(81),X=n.n(Z),$=n(82),ee=n.n($),te=n(35),ne=Object(A.c)({name:"transactions",initialState:{transactionsList:[],transactionStatus:"initial",currentTablePage:1,totalAmountEntriesOfTheTable:0,transactionListByStatus:{entities:{Cancelled:[],Completed:[],Pending:[]},result:{id:"",schema:""}},statusFilters:["Completed","Cancelled","Pending"],typeFilters:["Withdrawal","Refill"],transactionListByType:{entities:{Withdrawal:[],Refill:[]},result:{id:"",schema:""}}},reducers:{saveTransactionsToState:function(e,t){e.transactionsList=t.payload,e.transactionStatus="imported"},changeCurrentTablePage:function(e,t){e.currentTablePage=t.payload},awaitingForData:function(e){e.transactionStatus="importing"},filterTransactionsData:function(e){var t=new te.b.Entity("Pending",{},{idAttribute:"TransactionId"}),n=new te.b.Entity("Completed",{},{idAttribute:"TransactionId"}),a=new te.b.Entity("Cancelled",{},{idAttribute:"TransactionId"}),r=new te.b.Array({Pending:t,Completed:n,Cancelled:a},(function(e){return"".concat(e.Status)})),c=new te.b.Entity("Refills",{},{idAttribute:"TransactionId"}),i=new te.b.Entity("Withdrawals",{},{idAttribute:"TransactionId"}),s=new te.b.Array({Refills:c,Withdrawals:i},(function(e){return"".concat(e.Type,"s")}));e.transactionListByType=Object(te.a)(e.transactionsList,s),e.transactionListByStatus=Object(te.a)(e.transactionsList,r)},defineStatusFilters:function(e,t){e.statusFilters=t.payload},defineTypeFilters:function(e,t){e.typeFilters=t.payload},defineTotalAmountEntriesOfTheTable:function(e,t){e.totalAmountEntriesOfTheTable=t.payload},changeTransactionStatus:function(e,t){e.transactionsList=e.transactionsList.map((function(e){return e.TransactionId!==t.payload.TransactionId?e:Object(h.a)(Object(h.a)({},e),{},{Status:t.payload.Status})}))},deleteTransaction:function(e,t){e.transactionsList=e.transactionsList.filter((function(e){return e.TransactionId!==t.payload}))}}}),ae=ne.actions,re=ae.saveTransactionsToState,ce=ae.changeCurrentTablePage,ie=ae.awaitingForData,se=ae.filterTransactionsData,oe=ae.defineStatusFilters,le=ae.defineTypeFilters,ue=ae.defineTotalAmountEntriesOfTheTable,de=ae.changeTransactionStatus,je=ae.deleteTransaction,be=ne.reducer,fe=Object(A.c)({name:"fileBlobSlice",initialState:{fileRequested:!1,filesList:[]},reducers:{fileRequestStarted:function(e){e.fileRequested=!0},fileRequestFinished:function(e){e.fileRequested=!1},updateFileList:function(e,t){e.filesList.push(t.payload)}}}),Oe=fe.actions,pe=Oe.fileRequestStarted,he=Oe.fileRequestFinished,xe=Oe.updateFileList,ve=fe.reducer;var me=function(){var e=Object(a.useState)(!1),t=Object(C.a)(e,2),n=t[0],r=t[1],c=Object(a.useRef)(null),i=f();return Object(R.jsxs)("span",{children:[Object(R.jsx)("input",{accept:".csv",onChange:function(e){var t;(null===(t=e.currentTarget.files)||void 0===t?void 0:t.length)&&(r(!0),i(ie()),i(xe(e.currentTarget.files[0].name)),X.a.parse(e.currentTarget.files[0],{complete:function(e){r(!1),i(G(e.data))},delimiter:",",header:!0,worker:!0}))},ref:c,style:{visibility:"hidden",position:"fixed"},type:"file"}),Object(R.jsx)(ee.a,{className:"m-1",variant:"primary",disabled:n,onClick:function(){var e;n||null===(e=c.current)||void 0===e||e.click()},children:n?"Importing\u2026":"Import"})]})},ge=n(121),we=n(119),Te=n(28),ye=n(70),Se=n(69);var Ce=function(e){var t=e.status,n=e.setStatus;return Object(R.jsx)(ye.a,{classNamePrefix:"react-select",closeMenuOnSelect:!0,components:Object(Se.a)(),defaultValue:q.filter((function(e){return e.value===t})),options:q,onChange:function(e){n(e.value)}})};var Ee=function(e){var t=e.id,n=e.show,r=e.setShow,c=e.status,i=f(),s=Object(a.useState)(c),o=Object(C.a)(s,2),l=o[0],u=o[1],d=function(){return r(!1)};return Object(R.jsxs)(Te.a,{show:n,onHide:d,children:[Object(R.jsx)(Te.a.Header,{closeButton:!0,children:Object(R.jsxs)(Te.a.Title,{children:["Transaction ID: ",t,"."]})}),Object(R.jsxs)(Te.a.Body,{children:[Object(R.jsx)("span",{className:"font-weight-bold",children:"Edit status:"}),Object(R.jsx)(Ce,{status:l,setStatus:u})]}),Object(R.jsxs)(Te.a.Footer,{children:[Object(R.jsx)(v.a,{variant:"secondary",onClick:d,children:"Close"}),Object(R.jsx)(v.a,{variant:"primary",onClick:function(){if(l!==c){var e={Status:l,TransactionId:String(t)};i(Q(e))}r(!1)},children:"Save Changes"})]})]})};var Ae=function(e){var t=e.id,n=e.show,a=e.setShow,r=f(),c=function(){return a(!1)};return Object(R.jsxs)(Te.a,{show:n,onHide:c,children:[Object(R.jsx)(Te.a.Header,{closeButton:!0,children:Object(R.jsx)(Te.a.Title,{children:"Confirmation needed"})}),Object(R.jsx)(Te.a.Body,{children:Object(R.jsxs)("span",{className:"font-weight-bold",children:["Are you sure you want irreversibly Delete Transaction with id ",t,"?"]})}),Object(R.jsxs)(Te.a.Footer,{children:[Object(R.jsx)(v.a,{variant:"primary",onClick:c,children:"CANCEL"}),Object(R.jsx)(v.a,{variant:"danger",onClick:function(){r(W(String(t))),a(!1)},children:"DELETE"})]})]})};var _e=function(e){var t=e.id,n=e.status,r=Object(a.useState)(!1),c=Object(C.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)(!1),l=Object(C.a)(o,2),u=l[0],d=l[1];return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(we.a,{size:"sm",children:[Object(R.jsx)(v.a,{variant:"primary",onClick:function(){s(!0)},children:"Edit"}),Object(R.jsx)(v.a,{variant:"danger",onClick:function(){d(!0)},children:"Delete"})]}),Object(R.jsx)(Ee,{status:n,show:i,setShow:s,id:t}),Object(R.jsx)(Ae,{id:t,show:u,setShow:d})]})},ke=n(120);var Fe=function(){var e=f(),t=O((function(e){return e.transactions.transactionListByStatus.entities})),n=O((function(e){return e.fileBlob.fileRequested})),r=O((function(e){return e.transactions.statusFilters})),c=O((function(e){return e.transactions.typeFilters})),i={};r.forEach((function(e){if(2===c.length)i=Object(h.a)(Object(h.a)({},i),t[e]);else{var n=Object.entries(t[e]).filter((function(e){return e[1].Type===c[0]}));i=Object(h.a)(Object(h.a)({},i),Object.fromEntries(n))}}));var s=Object.values(i);Object(a.useEffect)((function(){if(n){var t=X.a.unparse(s),a=new Blob([t],{type:"text/plain;charset=utf-8"});Object(ke.saveAs)(a,"transaction.csv"),e(he())}}),[n]),Object(a.useEffect)((function(){e(ue(s.length))}));var o=O((function(e){return e.transactions.currentTablePage})),l=[],u=s.slice(10*(o-1),10*o).map((function(e){var t=Object.values(e).map((function(e,t){return Object(R.jsx)("td",{children:e},e+String(o-1)+String(t))}));return Object(R.jsxs)("tr",{children:[t,Object(R.jsx)("td",{children:Object(R.jsx)(_e,{status:e.Status,id:+e.TransactionId})})]},e.TransactionId+"trt")}));return s.length&&(l=Object.keys(s[0]).map((function(e,t){return Object(R.jsx)("th",{children:e},e+t)}))),Object(R.jsxs)(ge.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(R.jsx)("thead",{children:Object(R.jsxs)("tr",{children:[l,Object(R.jsx)("th",{children:"Action"})]})}),Object(R.jsx)("tbody",{children:u})]})},Pe=n(37);var Le=function(){var e=f(),t=O((function(e){return e.transactions.currentTablePage})),n=O((function(e){return e.transactions.totalAmountEntriesOfTheTable})),r=Math.ceil(n/10);Object(a.useEffect)((function(){t>r&&e(ce(0===r?1:r))}),[r]);for(var c=[],i=function(e){return e<1||e>r?"continue|newIteration":void c.push(Object(R.jsx)(Pe.a.Item,{onClick:function(){return o(e)},active:e===t,children:e},e+"hgfh"))},s=t-3;s<=t+3;s++)i(s);function o(t){e(ce(t))}return t<r-3&&r>3&&(t<r-4&&c.push(Object(R.jsx)(Pe.a.Ellipsis,{},"Ellipsis")),c.push(Object(R.jsx)(Pe.a.Item,{onClick:function(){return o(r)},children:r},r+"totalAmountOfPages"))),Object(R.jsxs)(Pe.a,{children:[Object(R.jsx)(Pe.a.First,{onClick:function(){return e(ce(1))}}),Object(R.jsx)(Pe.a.Prev,{onClick:function(){t>1&&e(ce(t-1))}}),c,Object(R.jsx)(Pe.a.Next,{onClick:function(){t<r&&e(ce(t+1))}}),Object(R.jsx)(Pe.a.Last,{onClick:function(){return e(ce(r))}})]})},Ie=n(122),Re=n.n(Ie);var Ne=function(){return Object(R.jsxs)("div",{className:Re.a["lds-grid"],children:[Object(R.jsx)("div",{}),Object(R.jsx)("div",{}),Object(R.jsx)("div",{}),Object(R.jsx)("div",{}),Object(R.jsx)("div",{}),Object(R.jsx)("div",{}),Object(R.jsx)("div",{}),Object(R.jsx)("div",{}),Object(R.jsx)("div",{})]})};var Be=function(e){return function(){var t=O((function(e){return e.transactions.transactionStatus}));return"initial"===t?Object(R.jsx)("div",{children:"Please import *.csv file to start work"}):"importing"===t?Object(R.jsx)("div",{children:Object(R.jsx)(Ne,{})}):"imported"===t?Object(R.jsx)(e,{}):null}}((function(){return Object(R.jsxs)("div",{children:[Object(R.jsx)(Fe,{}),Object(R.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(R.jsx)(Le,{})})]})})),De=n(71),Me=n.n(De);var ze=function(){var e=f();return Object(R.jsxs)("div",{children:[Object(R.jsx)(ye.a,{className:Me.a["react-select--inline"],classNamePrefix:Me.a["react-select"],closeMenuOnSelect:!1,components:Object(Se.a)(),defaultValue:q,isMulti:!0,options:q,onChange:function(t){var n=null===t||void 0===t?void 0:t.map((function(e){return e.value}));e(oe(n))}}),Object(R.jsx)(ye.a,{className:Me.a["react-select--inline"],classNamePrefix:Me.a["react-select"],closeMenuOnSelect:!1,components:Object(Se.a)(),defaultValue:H,isMulti:!0,options:H,onChange:function(t){var n=null===t||void 0===t?void 0:t.map((function(e){return e.value}));e(le(n))}})]})};var qe=function(){var e=f(),t=O((function(e){return e.fileBlob.fileRequested}));return Object(R.jsx)(ee.a,{variant:"primary",disabled:t,onClick:function(){e(pe())},children:t?"Exporting\u2026":"Export"})},He=n(96);var Ue=function(){var e=O((function(e){return e.fileBlob.filesList})).map((function(e,t){return Object(R.jsx)(He.a.Item,{action:!0,variant:"light",children:e},e+t)}));return Object(R.jsx)(He.a,{className:"mh-100",children:e})},We=n(123),Qe=n.n(We),Ge=K((function(){return Object(R.jsxs)("div",{className:Qe.a.container,children:[Object(R.jsx)("header",{children:"Application Header"}),Object(R.jsxs)("nav",{children:[Object(R.jsx)("section",{children:Object(R.jsx)(ze,{})}),Object(R.jsxs)("section",{children:[Object(R.jsx)(me,{})," ",Object(R.jsx)(qe,{})]})]}),Object(R.jsx)("main",{children:Object(R.jsx)(Be,{})}),Object(R.jsx)("aside",{children:Object(R.jsx)(Ue,{})})]})}));var Je=function(){return Object(R.jsx)("div",{className:o.a.App,children:Object(R.jsx)(Ge,{})})},Ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,195)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},Ye=n(125),Ke=n(124),Ze=n(25),Xe=n.n(Ze),$e=n(21),et=Xe.a.mark(ct),tt=Xe.a.mark(it),nt=Xe.a.mark(st),at=Xe.a.mark(ot),rt=Xe.a.mark(lt);function ct(e){var t;return Xe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object($e.a)(ut,e.payload);case 3:if(0===(t=n.sent).resultCode){n.next=6;break}throw new Error(t.messages[0]);case 6:return n.next=8,Object($e.b)(F());case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object($e.b)(P(n.t0.message));case 14:case"end":return n.stop()}}),et,null,[[0,10]])}function it(e){return Xe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object($e.b)(re(e.payload));case 3:return t.next=5,Object($e.b)(se());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,alert(t.t0.message);case 11:case"end":return t.stop()}}),tt,null,[[0,7]])}function st(e){return Xe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object($e.b)(de(e.payload));case 3:return t.next=5,Object($e.b)(se());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,alert(t.t0.message);case 11:case"end":return t.stop()}}),nt,null,[[0,7]])}function ot(e){return Xe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object($e.b)(je(e.payload));case 3:return t.next=5,Object($e.b)(se());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,alert(t.t0.message);case 11:case"end":return t.stop()}}),at,null,[[0,7]])}function lt(){return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($e.c)(B,ct);case 2:return e.next=4,Object($e.c)(D,it);case 4:return e.next=6,Object($e.c)(M,st);case 6:return e.next=8,Object($e.c)(z,ot);case 8:case"end":return e.stop()}}),rt)}function ut(e){return dt.apply(this,arguments)}function dt(){return(dt=Object(Ke.a)(Xe.a.mark((function e(t){var n;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("auth",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jt=lt,bt=Object(Ye.a)(),ft=Object(A.a)({reducer:{authorization:I,transactions:be,fileBlob:ve},middleware:function(e){return e().concat(bt)}});bt.run(jt),i.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(b.a,{store:ft,children:Object(R.jsx)(Je,{})})}),document.getElementById("root")),Ve()},71:function(e,t,n){e.exports={"react-select--inline":"Dropdowns_react-select--inline__1nQd6","react-select__control":"Dropdowns_react-select__control__1NkYD","react-select__single-value":"Dropdowns_react-select__single-value__3HlHa"}}},[[189,1,2]]]);
//# sourceMappingURL=main.97a37d8b.chunk.js.map