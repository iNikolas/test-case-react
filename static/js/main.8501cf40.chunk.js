(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{114:function(e,t,n){e.exports={wrapper:"Login_wrapper__31AdJ"}},120:function(e,t,n){e.exports={"lds-grid":"Loader_lds-grid__GrKkF"}},127:function(e,t,n){},128:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},189:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),i=n.n(c),s=(n(127),n(128),n(129),n(59)),o=n.n(s),l=n(112);function u(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return[e,{resultCode:t,messages:a,data:{userId:n}}]}new(n.n(l).a)(o.a).onPost("/auth").reply((function(e){var t,n,a;return e.data&&(a=JSON.parse(e.data)),"test"===(null===(t=a)||void 0===t?void 0:t.username)&&"666666"===(null===(n=a)||void 0===n?void 0:n.password)?u(200,0,1):u(200,1,null,["Wrong authorization data"])}));var d=n(68),j=function(){return Object(d.b)()},b=d.c,f=n(5),O=n(2),p=n(41),h=n(30),x=n(86);function v(e){return e?void 0:"This field is required"}var m=n(94),g=n.n(m),y=n(114),w=n.n(y),T="AUTHORIZATION_REQUESTED",S="PUT_TRANSACTIONS_REQUESTED",C="EXPORT_CSV_FILE_REQUESTED",E="CHANGE_TRANSACTION_STATUS_REQUESTED",k="DELETE_TRANSACTION_REQUESTED",A=[{value:"Pending",label:"Pending"},{value:"Completed",label:"Completed"},{value:"Cancelled",label:"Cancelled"}],L=[{value:"Refill",label:"Refill"},{value:"Withdrawal",label:"Withdrawal"}],P=n(12),F=n(115),I=n(38),R=Object(I.b)({name:"authorization",initialState:{isAuthorized:!1,errMessage:""},reducers:{authSucceeded:function(e){e.isAuthorized=!0,e.errMessage=""},authFailed:function(e,t){e.isAuthorized=!1,e.errMessage=t.payload},cleanErrMessageField:function(e){e.errMessage=""}}}),N=R.actions,B=N.authSucceeded,_=N.authFailed,D=N.cleanErrMessageField,M=R.reducer,z=n(1);var U=function(){var e=b((function(e){return e.authorization.errMessage})),t=j(),n=Object(a.useState)(!1),r=Object(P.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){e&&i(!0)}),[e]),c?Object(z.jsx)(F.a,{variant:"danger",onClose:function(){i(!1),t(D())},dismissible:!0,children:e}):null},W=["placement","arrowProps","show","popper"],q=["placement","arrowProps","show","popper"],H=function(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(null),r=j();return Object(z.jsxs)("div",{className:w.a.wrapper,children:[Object(z.jsx)("div",{style:{position:"absolute",bottom:10,right:10},children:Object(z.jsx)(U,{})}),Object(z.jsx)(x.b,{onSubmit:function(e){r({type:T,payload:e})},render:function(e){var a,r=e.handleSubmit,c=e.invalid,i=e.submitting;return Object(z.jsxs)(p.a,{onSubmit:r,children:[Object(z.jsx)(x.a,{validate:v,name:"username",render:function(e){var n=e.input,a=e.meta;return Object(z.jsxs)("div",{style:{textAlign:"left",fontWeight:"bold"},children:[Object(z.jsxs)(p.a.Group,{className:"mb-3",controlId:"username",children:[Object(z.jsx)(p.a.Label,{children:"Username"}),Object(z.jsx)(p.a.Control,Object(O.a)(Object(O.a)({ref:t},n),{},{placeholder:"Username"}))]}),a.touched&&a.error&&Object(z.jsx)(g.a,{target:t.current,show:!0,placement:"right",children:function(e){e.placement,e.arrowProps,e.show,e.popper;var t=Object(f.a)(e,W);return Object(z.jsx)("div",Object(O.a)(Object(O.a)({},t),{},{style:Object(O.a)({backgroundColor:"rgba(255, 100, 100, 0.85)",padding:"2px 10px",color:"white",borderRadius:3},t.style),children:a.error}))}})]})}}),Object(z.jsx)(x.a,{validate:(a=4,function(e){var t;return(e=null!==(t=e)&&void 0!==t?t:"").length>a?void 0:"Min. length for this Field at least ".concat(a," char.")}),name:"password",render:function(e){var t=e.input,a=e.meta;return Object(z.jsxs)("div",{style:{textAlign:"left",fontWeight:"bold"},children:[Object(z.jsxs)(p.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(z.jsx)(p.a.Label,{children:"Password"}),Object(z.jsx)(p.a.Control,Object(O.a)(Object(O.a)({ref:n},t),{},{type:"password",placeholder:"Password"}))]}),a.touched&&a.error&&Object(z.jsx)(g.a,{target:n.current,show:!0,placement:"right",children:function(e){e.placement,e.arrowProps,e.show,e.popper;var t=Object(f.a)(e,q);return Object(z.jsx)("div",Object(O.a)(Object(O.a)({},t),{},{style:Object(O.a)({backgroundColor:"rgba(255, 100, 100, 0.85)",padding:"2px 10px",color:"white",borderRadius:3},t.style),children:a.error}))}})]})}}),Object(z.jsx)(h.a,{variant:"primary",type:"submit",disabled:i||c,children:"Login"})]})}})]})};var Q=function(e){return function(){var t=b((function(e){return e.authorization.isAuthorized}));return Object(z.jsx)("div",{children:t?Object(z.jsx)(e,{}):Object(z.jsx)(H,{})})}},G=n(80),J=n.n(G),V=n(81),K=n.n(V),X=n(34),Z=Object(I.b)({name:"transactions",initialState:{transactionsList:[],transactionStatus:"initial",currentTablePage:1,totalAmountEntriesOfTheTable:0,transactionListByStatus:{entities:{Cancelled:[],Completed:[],Pending:[]},result:{id:"",schema:""}},statusFilters:["Completed","Cancelled","Pending"],typeFilters:["Withdrawal","Refill"],transactionListByType:{entities:{Withdrawal:[],Refill:[]},result:{id:"",schema:""}}},reducers:{saveTransactionsToState:function(e,t){e.transactionsList=t.payload,e.transactionStatus="imported"},changeCurrentTablePage:function(e,t){e.currentTablePage=t.payload},awaitingForData:function(e){e.transactionStatus="importing"},filterTransactionsData:function(e){var t=new X.b.Entity("Pending",{},{idAttribute:"TransactionId"}),n=new X.b.Entity("Completed",{},{idAttribute:"TransactionId"}),a=new X.b.Entity("Cancelled",{},{idAttribute:"TransactionId"}),r=new X.b.Array({Pending:t,Completed:n,Cancelled:a},(function(e){return"".concat(e.Status)})),c=new X.b.Entity("Refills",{},{idAttribute:"TransactionId"}),i=new X.b.Entity("Withdrawals",{},{idAttribute:"TransactionId"}),s=new X.b.Array({Refills:c,Withdrawals:i},(function(e){return"".concat(e.Type,"s")}));e.transactionListByType=Object(X.a)(e.transactionsList,s),e.transactionListByStatus=Object(X.a)(e.transactionsList,r)},defineStatusFilters:function(e,t){e.statusFilters=t.payload},defineTypeFilters:function(e,t){e.typeFilters=t.payload},defineTotalAmountEntriesOfTheTable:function(e,t){e.totalAmountEntriesOfTheTable=t.payload},changeTransactionStatus:function(e,t){e.transactionsList=e.transactionsList.map((function(e){return e.TransactionId!==t.payload.TransactionId?e:Object(O.a)(Object(O.a)({},e),{},{Status:t.payload.Status})}))},deleteTransaction:function(e,t){e.transactionsList=e.transactionsList.filter((function(e){return e.TransactionId!==t.payload}))}}}),Y=Z.actions,$=Y.saveTransactionsToState,ee=Y.changeCurrentTablePage,te=Y.awaitingForData,ne=Y.filterTransactionsData,ae=Y.defineStatusFilters,re=Y.defineTypeFilters,ce=Y.defineTotalAmountEntriesOfTheTable,ie=Y.changeTransactionStatus,se=Y.deleteTransaction,oe=Z.reducer,le=Object(I.b)({name:"fileBlobSlice",initialState:{fileRequested:!1,filesList:[]},reducers:{fileRequest:function(e,t){e.fileRequested=t.payload},updateFileList:function(e,t){e.filesList.push(t.payload)}}}),ue=le.actions,de=ue.fileRequest,je=ue.updateFileList,be=le.reducer;var fe=function(){var e=Object(a.useState)(!1),t=Object(P.a)(e,2),n=t[0],r=t[1],c=Object(a.useRef)(null),i=j();return Object(z.jsxs)("span",{children:[Object(z.jsx)("input",{accept:".csv",onChange:function(e){var t;(null===(t=e.currentTarget.files)||void 0===t?void 0:t.length)&&(r(!0),i(te()),i(je(e.currentTarget.files[0].name)),J.a.parse(e.currentTarget.files[0],{complete:function(e){r(!1),i({type:S,payload:e.data})},delimiter:",",header:!0,worker:!0}))},ref:c,style:{visibility:"hidden",position:"fixed"},type:"file"}),Object(z.jsx)(K.a,{className:"m-1",variant:"primary",disabled:n,onClick:function(){var e;n||null===(e=c.current)||void 0===e||e.click()},children:n?"Importing\u2026":"Import"})]})},Oe=n(119),pe=n(117),he=n(27),xe=n(70),ve=n(69);var me=function(e){var t=e.status,n=e.setStatus;return Object(z.jsx)(xe.a,{classNamePrefix:"react-select",closeMenuOnSelect:!0,components:Object(ve.a)(),defaultValue:A.filter((function(e){return e.value===t})),options:A,onChange:function(e){n(e.value)}})};var ge=function(e){var t=e.id,n=e.show,r=e.setShow,c=e.status,i=j(),s=Object(a.useState)(c),o=Object(P.a)(s,2),l=o[0],u=o[1],d=function(){return r(!1)};return Object(z.jsxs)(he.a,{show:n,onHide:d,children:[Object(z.jsx)(he.a.Header,{closeButton:!0,children:Object(z.jsxs)(he.a.Title,{children:["Transaction ID: ",t,"."]})}),Object(z.jsxs)(he.a.Body,{children:[Object(z.jsx)("span",{className:"font-weight-bold",children:"Edit status:"}),Object(z.jsx)(me,{status:l,setStatus:u})]}),Object(z.jsxs)(he.a.Footer,{children:[Object(z.jsx)(h.a,{variant:"secondary",onClick:d,children:"Close"}),Object(z.jsx)(h.a,{variant:"primary",onClick:function(){if(l!==c){var e={Status:l,TransactionId:String(t)};i({type:E,payload:e})}r(!1)},children:"Save Changes"})]})]})};var ye=function(e){var t=e.id,n=e.show,a=e.setShow,r=j(),c=function(){return a(!1)};return Object(z.jsxs)(he.a,{show:n,onHide:c,children:[Object(z.jsx)(he.a.Header,{closeButton:!0,children:Object(z.jsx)(he.a.Title,{children:"Confirmation needed"})}),Object(z.jsx)(he.a.Body,{children:Object(z.jsxs)("span",{className:"font-weight-bold",children:["Are you sure you want irreversibly Delete Transaction with id ",t,"?"]})}),Object(z.jsxs)(he.a.Footer,{children:[Object(z.jsx)(h.a,{variant:"primary",onClick:c,children:"CANCEL"}),Object(z.jsx)(h.a,{variant:"danger",onClick:function(){r({type:k,payload:String(t)}),a(!1)},children:"DELETE"})]})]})};var we=function(e){var t=e.id,n=e.status,r=Object(a.useState)(!1),c=Object(P.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)(!1),l=Object(P.a)(o,2),u=l[0],d=l[1];return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(pe.a,{size:"sm",children:[Object(z.jsx)(h.a,{variant:"primary",onClick:function(){s(!0)},children:"Edit"}),Object(z.jsx)(h.a,{variant:"danger",onClick:function(){d(!0)},children:"Delete"})]}),Object(z.jsx)(ge,{status:n,show:i,setShow:s,id:t}),Object(z.jsx)(ye,{id:t,show:u,setShow:d})]})},Te=n(118);var Se=function(){var e=j(),t=b((function(e){return e.transactions.transactionListByStatus.entities})),n=b((function(e){return e.fileBlob.fileRequested})),r=b((function(e){return e.transactions.statusFilters})),c=b((function(e){return e.transactions.typeFilters})),i={};r.forEach((function(e){if(2===c.length)i=Object(O.a)(Object(O.a)({},i),t[e]);else{var n=Object.entries(t[e]).filter((function(e){return e[1].Type===c[0]}));i=Object(O.a)(Object(O.a)({},i),Object.fromEntries(n))}}));var s=Object.values(i);Object(a.useEffect)((function(){if(n){var t=J.a.unparse(s),a=new Blob([t],{type:"text/plain;charset=utf-8"});Object(Te.saveAs)(a,"transaction.csv"),console.log(t),e(de(!1))}}),[n]),Object(a.useEffect)((function(){e(ce(s.length))}));var o=b((function(e){return e.transactions.currentTablePage})),l=[],u=s.slice(10*(o-1),10*o).map((function(e){var t=Object.values(e).map((function(e,t){return Object(z.jsx)("td",{children:e},e+String(o-1)+String(t))}));return Object(z.jsxs)("tr",{children:[t,Object(z.jsx)("td",{children:Object(z.jsx)(we,{status:e.Status,id:+e.TransactionId})})]},e.TransactionId+"trt")}));return s.length&&(l=Object.keys(s[0]).map((function(e,t){return Object(z.jsx)("th",{children:e},e+t)}))),Object(z.jsxs)(Oe.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[l,Object(z.jsx)("th",{children:"Action"})]})}),Object(z.jsx)("tbody",{children:u})]})},Ce=n(36);var Ee=function(){var e=j(),t=b((function(e){return e.transactions.currentTablePage})),n=b((function(e){return e.transactions.totalAmountEntriesOfTheTable})),r=Math.ceil(n/10);Object(a.useEffect)((function(){t>r&&e(ee(0===r?1:r))}),[r]);for(var c=[],i=function(e){return e<1||e>r?"continue|newIteration":void c.push(Object(z.jsx)(Ce.a.Item,{onClick:function(){return o(e)},active:e===t,children:e},e+"hgfh"))},s=t-3;s<=t+3;s++)i(s);function o(t){e(ee(t))}return t<r-3&&r>3&&(t<r-4&&c.push(Object(z.jsx)(Ce.a.Ellipsis,{},"Ellipsis")),c.push(Object(z.jsx)(Ce.a.Item,{onClick:function(){return o(r)},children:r},r+"totalAmountOfPages"))),Object(z.jsxs)(Ce.a,{children:[Object(z.jsx)(Ce.a.First,{onClick:function(){return e(ee(1))}}),Object(z.jsx)(Ce.a.Prev,{onClick:function(){t>1&&e(ee(t-1))}}),c,Object(z.jsx)(Ce.a.Next,{onClick:function(){t<r&&e(ee(t+1))}}),Object(z.jsx)(Ce.a.Last,{onClick:function(){return e(ee(r))}})]})},ke=n(120),Ae=n.n(ke);var Le=function(){return Object(z.jsxs)("div",{className:Ae.a["lds-grid"],children:[Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{})]})};var Pe=function(e){return function(){var t=b((function(e){return e.transactions.transactionStatus}));return"initial"===t?Object(z.jsx)("div",{children:"Please import *.csv file to start work"}):"importing"===t?Object(z.jsx)("div",{children:Object(z.jsx)(Le,{})}):"imported"===t?Object(z.jsx)(e,{}):null}}((function(){return Object(z.jsxs)("div",{children:[Object(z.jsx)(Se,{}),Object(z.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(z.jsx)(Ee,{})})]})}));n(185);var Fe=function(){var e=j();return Object(z.jsxs)("div",{children:[Object(z.jsx)(xe.a,{className:"react-select--inline",classNamePrefix:"react-select",closeMenuOnSelect:!1,components:Object(ve.a)(),defaultValue:A,isMulti:!0,options:A,onChange:function(t){var n=null===t||void 0===t?void 0:t.map((function(e){return e.value}));e(ae(n))}}),Object(z.jsx)(xe.a,{className:"react-select--inline",classNamePrefix:"react-select",closeMenuOnSelect:!1,components:Object(ve.a)(),defaultValue:L,isMulti:!0,options:L,onChange:function(t){var n=null===t||void 0===t?void 0:t.map((function(e){return e.value}));e(re(n))}})]})};var Ie=function(){var e=j(),t=b((function(e){return e.fileBlob.fileRequested}));return Object(z.jsx)(K.a,{variant:"primary",disabled:t,onClick:function(){e({type:C,payload:!0})},children:t?"Exporting\u2026":"Export"})},Re=n(95);var Ne=function(){var e=b((function(e){return e.fileBlob.filesList})).map((function(e,t){return Object(z.jsx)(Re.a.Item,{action:!0,variant:"light",children:e},e+t)}));return Object(z.jsx)(Re.a,{className:"mh-100",children:e})},Be=(n(186),Q((function(){return Object(z.jsxs)("div",{className:"container",children:[Object(z.jsx)("header",{children:"Application Header"}),Object(z.jsxs)("nav",{children:[Object(z.jsx)("section",{children:Object(z.jsx)(Fe,{})}),Object(z.jsxs)("section",{children:[Object(z.jsx)(fe,{})," ",Object(z.jsx)(Ie,{})]})]}),Object(z.jsx)("main",{children:Object(z.jsx)(Pe,{})}),Object(z.jsx)("aside",{children:Object(z.jsx)(Ne,{})})]})})));var _e=function(){return Object(z.jsx)("div",{className:"App",children:Object(z.jsx)(Be,{})})},De=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,195)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},Me=n(122),ze=n(121),Ue=n(22),We=n.n(Ue),qe=n(18),He=We.a.mark(Xe),Qe=We.a.mark(Ze),Ge=We.a.mark(Ye),Je=We.a.mark($e),Ve=We.a.mark(et),Ke=We.a.mark(tt);function Xe(e){var t;return We.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(qe.a)(nt,e.payload);case 3:if(0===(t=n.sent).resultCode){n.next=6;break}throw new Error(t.messages[0]);case 6:return n.next=8,Object(qe.b)(B());case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(qe.b)(_(n.t0.message));case 14:case"end":return n.stop()}}),He,null,[[0,10]])}function Ze(e){return We.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(qe.b)($(e.payload));case 3:return t.next=5,Object(qe.b)(ne());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,alert(t.t0.message);case 11:case"end":return t.stop()}}),Qe,null,[[0,7]])}function Ye(e){return We.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(qe.b)(ie(e.payload));case 3:return t.next=5,Object(qe.b)(ne());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,alert(t.t0.message);case 11:case"end":return t.stop()}}),Ge,null,[[0,7]])}function $e(e){return We.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(qe.b)(se(e.payload));case 3:return t.next=5,Object(qe.b)(ne());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,alert(t.t0.message);case 11:case"end":return t.stop()}}),Je,null,[[0,7]])}function et(e){return We.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(qe.b)(de(e.payload));case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,alert(t.t0.message);case 9:case"end":return t.stop()}}),Ve,null,[[0,5]])}function tt(){return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(qe.c)(T,Xe);case 2:return e.next=4,Object(qe.c)(S,Ze);case 4:return e.next=6,Object(qe.c)(E,Ye);case 6:return e.next=8,Object(qe.c)(k,$e);case 8:return e.next=10,Object(qe.c)(C,et);case 10:case"end":return e.stop()}}),Ke)}function nt(e){return at.apply(this,arguments)}function at(){return(at=Object(ze.a)(We.a.mark((function e(t){var n;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("auth",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rt=tt,ct=Object(Me.a)(),it=Object(I.a)({reducer:{authorization:M,transactions:oe,fileBlob:be},middleware:function(e){return e().concat(ct)}});ct.run(rt),i.a.render(Object(z.jsx)(r.a.StrictMode,{children:Object(z.jsx)(d.a,{store:it,children:Object(z.jsx)(_e,{})})}),document.getElementById("root")),De()}},[[189,1,2]]]);
//# sourceMappingURL=main.8501cf40.chunk.js.map