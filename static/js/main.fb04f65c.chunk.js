(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{114:function(e,t,n){e.exports={App:"App_App__3Yzea"}},117:function(e,t,n){e.exports={wrapper:"Login_wrapper__31AdJ"}},123:function(e,t,n){e.exports={"lds-grid":"Loader_lds-grid__GrKkF"}},124:function(e,t,n){e.exports={container:"MainPage_container__20tSO"}},131:function(e,t,n){},190:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(15),c=n.n(r),i=(n(131),n(114)),s=n.n(i),o=(n(132),n(60)),l=n.n(o),u=n(115);function d(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return[e,{resultCode:t,messages:a,data:{userId:n}}]}new(n.n(u).a)(l.a).onPost("/auth").reply((function(e){var t,n,a;return e.data&&(a=JSON.parse(e.data)),"test"===(null===(t=a)||void 0===t?void 0:t.username)&&"666666"===(null===(n=a)||void 0===n?void 0:n.password)?d(200,0,1):d(200,1,null,["Wrong authorization data"])}));var j=n(69),b=function(){return Object(j.b)()},f=j.c,O=n(5),p=n(2),h=n(41),x=n(30),v=n(88);function m(e){return e?void 0:"This field is required"}var g=n(96),w=n.n(g),y=n(117),T=n.n(y),S=n(12),C=n(118),E=n(23),A=Object(E.c)({name:"authorization",initialState:{isAuthorized:!1,errMessage:""},reducers:{authSucceeded:function(e){e.isAuthorized=!0,e.errMessage=""},authFailed:function(e,t){e.isAuthorized=!1,e.errMessage=t.payload},cleanErrMessageField:function(e){e.errMessage=""}}}),_=A.actions,k=_.authSucceeded,F=_.authFailed,P=_.cleanErrMessageField,N=A.reducer,I=n(1);var R=function(){var e=f((function(e){return e.authorization.errMessage})),t=b(),n=Object(a.useState)(!1),r=Object(S.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){e&&i(!0)}),[e]),c?Object(I.jsx)(C.a,{variant:"danger",onClose:function(){i(!1),t(P())},dismissible:!0,children:e}):null},L="AUTHORIZATION_REQUESTED",B="PUT_TRANSACTIONS_REQUESTED",D="CHANGE_TRANSACTION_STATUS_REQUESTED",M="DELETE_TRANSACTION_REQUESTED",z=[{value:"Pending",label:"Pending"},{value:"Completed",label:"Completed"},{value:"Cancelled",label:"Cancelled"}],q=[{value:"Refill",label:"Refill"},{value:"Withdrawal",label:"Withdrawal"}],W=Object(E.b)(L),H=Object(E.b)(M),U=Object(E.b)(D),Q=Object(E.b)(B),G=["placement","arrowProps","show","popper"],J=["placement","arrowProps","show","popper"],V=function(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(null),r=b();return Object(I.jsxs)("div",{className:T.a.wrapper,children:[Object(I.jsx)("div",{style:{position:"absolute",bottom:10,right:10},children:Object(I.jsx)(R,{})}),Object(I.jsx)(v.b,{onSubmit:function(e){r(W(e))},render:function(e){var a,r=e.handleSubmit,c=e.invalid,i=e.submitting;return Object(I.jsxs)(h.a,{onSubmit:r,children:[Object(I.jsx)(v.a,{validate:m,name:"username",render:function(e){var n=e.input,a=e.meta;return Object(I.jsxs)("div",{style:{textAlign:"left",fontWeight:"bold"},children:[Object(I.jsxs)(h.a.Group,{className:"mb-3",controlId:"username",children:[Object(I.jsx)(h.a.Label,{children:"Username"}),Object(I.jsx)(h.a.Control,Object(p.a)(Object(p.a)({ref:t},n),{},{placeholder:"Username"}))]}),a.touched&&a.error&&Object(I.jsx)(w.a,{target:t.current,show:!0,placement:"right",children:function(e){e.placement,e.arrowProps,e.show,e.popper;var t=Object(O.a)(e,G);return Object(I.jsx)("div",Object(p.a)(Object(p.a)({},t),{},{style:Object(p.a)({backgroundColor:"rgba(255, 100, 100, 0.85)",padding:"2px 10px",color:"white",borderRadius:3},t.style),children:a.error}))}})]})}}),Object(I.jsx)(v.a,{validate:(a=4,function(e){var t;return(e=null!==(t=e)&&void 0!==t?t:"").length>a?void 0:"Min. length for this Field at least ".concat(a," char.")}),name:"password",render:function(e){var t=e.input,a=e.meta;return Object(I.jsxs)("div",{style:{textAlign:"left",fontWeight:"bold"},children:[Object(I.jsxs)(h.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(I.jsx)(h.a.Label,{children:"Password"}),Object(I.jsx)(h.a.Control,Object(p.a)(Object(p.a)({ref:n},t),{},{type:"password",placeholder:"Password"}))]}),a.touched&&a.error&&Object(I.jsx)(w.a,{target:n.current,show:!0,placement:"right",children:function(e){e.placement,e.arrowProps,e.show,e.popper;var t=Object(O.a)(e,J);return Object(I.jsx)("div",Object(p.a)(Object(p.a)({},t),{},{style:Object(p.a)({backgroundColor:"rgba(255, 100, 100, 0.85)",padding:"2px 10px",color:"white",borderRadius:3},t.style),children:a.error}))}})]})}}),Object(I.jsx)(x.a,{variant:"primary",type:"submit",disabled:i||c,children:"Login"})]})}})]})};var Y=function(e){return function(){var t=f((function(e){return e.authorization.isAuthorized}));return Object(I.jsx)("div",{children:t?Object(I.jsx)(e,{}):Object(I.jsx)(V,{})})}},K=n(82),Z=n.n(K),X=n(83),$=n.n(X),ee=["Completed","Cancelled","Pending"],te=Object(E.c)({name:"transactions",initialState:{transactionStatus:"initial",currentTablePage:1,totalAmountEntriesOfTheTable:0,transactionListByStatus:{Cancelled:{1:{Amount:"",ClientName:"",Status:"Completed",TransactionId:"",Type:"Withdrawal"}},Completed:{1:{Amount:"",ClientName:"",Status:"Completed",TransactionId:"",Type:"Withdrawal"}},Pending:{1:{Amount:"",ClientName:"",Status:"Completed",TransactionId:"",Type:"Withdrawal"}}},statusFilters:["Completed","Cancelled","Pending"],typeFilters:["Withdrawal","Refill"]},reducers:{saveFilteredTransactionsToState:function(e,t){e.transactionListByStatus=t.payload,e.transactionStatus="imported"},changeCurrentTablePage:function(e,t){e.currentTablePage=t.payload},awaitingForData:function(e){e.transactionStatus="importing"},defineStatusFilters:function(e,t){e.statusFilters=t.payload},defineTypeFilters:function(e,t){e.typeFilters=t.payload},defineTotalAmountEntriesOfTheTable:function(e,t){e.totalAmountEntriesOfTheTable=t.payload},changeTransactionStatus:function(e,t){var n=t.payload.TransactionId,a=t.payload.Status,r={Amount:"",ClientName:"",Status:"Completed",TransactionId:"",Type:"Withdrawal"};ee.forEach((function(t){e.transactionListByStatus[t][n]&&((r=e.transactionListByStatus[t][n]).Status=a,delete e.transactionListByStatus[t][n])})),e.transactionListByStatus[a][n]=r},deleteTransaction:function(e,t){var n=t.payload;ee.forEach((function(t){delete e.transactionListByStatus[t][n]}))}}}),ne=te.actions,ae=ne.saveFilteredTransactionsToState,re=ne.changeCurrentTablePage,ce=ne.awaitingForData,ie=ne.defineStatusFilters,se=ne.defineTypeFilters,oe=ne.defineTotalAmountEntriesOfTheTable,le=ne.changeTransactionStatus,ue=ne.deleteTransaction,de=te.reducer,je=Object(E.c)({name:"fileBlobSlice",initialState:{fileRequested:!1,filesList:[]},reducers:{fileRequestStarted:function(e){e.fileRequested=!0},fileRequestFinished:function(e){e.fileRequested=!1},updateFileList:function(e,t){e.filesList.push(t.payload)}}}),be=je.actions,fe=be.fileRequestStarted,Oe=be.fileRequestFinished,pe=be.updateFileList,he=je.reducer;var xe=function(){var e=Object(a.useState)(!1),t=Object(S.a)(e,2),n=t[0],r=t[1],c=Object(a.useRef)(null),i=b();return Object(I.jsxs)("span",{children:[Object(I.jsx)("input",{accept:".csv",onChange:function(e){var t;(null===(t=e.currentTarget.files)||void 0===t?void 0:t.length)&&(r(!0),i(ce()),i(pe(e.currentTarget.files[0].name)),Z.a.parse(e.currentTarget.files[0],{complete:function(e){r(!1),i(Q(e.data))},delimiter:",",header:!0,worker:!0}))},ref:c,style:{visibility:"hidden",position:"fixed"},type:"file"}),Object(I.jsx)($.a,{className:"m-1",variant:"primary",disabled:n,onClick:function(){var e;n||null===(e=c.current)||void 0===e||e.click()},children:n?"Importing\u2026":"Import"})]})},ve=n(122),me=n(120),ge=n(35),we=n(121),ye=n(27),Te=n(71),Se=n(70);var Ce=function(e){var t=e.status,n=e.setStatus;return Object(I.jsx)(Te.a,{classNamePrefix:"react-select",closeMenuOnSelect:!0,components:Object(Se.a)(),defaultValue:z.filter((function(e){return e.value===t})),options:z,onChange:function(e){n(e.value)}})};var Ee=function(e){var t=e.id,n=e.show,r=e.setShow,c=e.status,i=b(),s=Object(a.useState)(c),o=Object(S.a)(s,2),l=o[0],u=o[1],d=function(){return r(!1)};return Object(I.jsxs)(ye.a,{show:n,onHide:d,children:[Object(I.jsx)(ye.a.Header,{closeButton:!0,children:Object(I.jsxs)(ye.a.Title,{children:["Transaction ID: ",t,"."]})}),Object(I.jsxs)(ye.a.Body,{children:[Object(I.jsx)("span",{className:"font-weight-bold",children:"Edit status:"}),Object(I.jsx)(Ce,{status:l,setStatus:u})]}),Object(I.jsxs)(ye.a.Footer,{children:[Object(I.jsx)(x.a,{variant:"secondary",onClick:d,children:"Close"}),Object(I.jsx)(x.a,{variant:"primary",onClick:function(){if(l!==c){var e={Status:l,TransactionId:String(t)};i(U(e))}r(!1)},children:"Save Changes"})]})]})};var Ae=function(e){var t=e.id,n=e.show,a=e.setShow,r=b(),c=function(){return a(!1)};return Object(I.jsxs)(ye.a,{show:n,onHide:c,children:[Object(I.jsx)(ye.a.Header,{closeButton:!0,children:Object(I.jsx)(ye.a.Title,{children:"Confirmation needed"})}),Object(I.jsx)(ye.a.Body,{children:Object(I.jsxs)("span",{className:"font-weight-bold",children:["Are you sure you want irreversibly Delete Transaction with id ",t,"?"]})}),Object(I.jsxs)(ye.a.Footer,{children:[Object(I.jsx)(x.a,{variant:"primary",onClick:c,children:"CANCEL"}),Object(I.jsx)(x.a,{variant:"danger",onClick:function(){r(H(String(t))),a(!1)},children:"DELETE"})]})]})};var _e=function(e){var t=e.id,n=e.status,r=Object(a.useState)(!1),c=Object(S.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)(!1),l=Object(S.a)(o,2),u=l[0],d=l[1];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(we.a,{size:"sm",children:[Object(I.jsx)(x.a,{variant:"primary",onClick:function(){s(!0)},children:"Edit"}),Object(I.jsx)(x.a,{variant:"danger",onClick:function(){d(!0)},children:"Delete"})]}),Object(I.jsx)(Ee,{status:n,show:i,setShow:s,id:t}),Object(I.jsx)(Ae,{id:t,show:u,setShow:d})]})},ke=Object(ge.a)((function(){return f((function(e){return e.transactions.transactionListByStatus}))}),(function(){return f((function(e){return e.transactions.statusFilters}))}),(function(){return f((function(e){return e.transactions.typeFilters}))}),(function(e,t,n){var a={};return t.forEach((function(t){if(2===n.length)a=Object(p.a)(Object(p.a)({},a),e[t]);else if(e[t]){var r=Object.entries(e[t]).filter((function(e){return e[1].Type===n[0]}));a=Object(p.a)(Object(p.a)({},a),Object.fromEntries(r))}})),a})),Fe=Object(ge.a)(ke,(function(e){return Object.values(e)})),Pe=Object(ge.a)(Fe,(function(){return f((function(e){return e.transactions.currentTablePage}))}),(function(e,t){return e.slice(10*(t-1),10*t).map((function(e){var n=Object.values(e).map((function(e,n){return Object(I.jsx)("td",{children:e},e+String(t-1)+String(n))}));return Object(I.jsxs)("tr",{children:[n,Object(I.jsx)("td",{children:Object(I.jsx)(_e,{status:e.Status,id:+e.TransactionId})})]},e.TransactionId+"trt")}))})),Ne=Object(ge.a)(Fe,(function(e){return e.length?Object.keys(e[0]).map((function(e,t){return Object(I.jsx)("th",{children:e},e+t)})):[]}));var Ie=function(){var e=b(),t=f((function(e){return e.fileBlob.fileRequested})),n=f(Fe),r=f(Ne),c=f(Pe);return Object(a.useEffect)((function(){if(t){var a=Z.a.unparse(n),r=new Blob([a],{type:"text/plain;charset=utf-8"});Object(me.saveAs)(r,"transaction.csv"),e(Oe())}}),[t]),Object(a.useEffect)((function(){e(oe(n.length))})),Object(I.jsxs)(ve.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(I.jsx)("thead",{children:Object(I.jsxs)("tr",{children:[r,Object(I.jsx)("th",{children:"Action"})]})}),Object(I.jsx)("tbody",{children:c})]})},Re=n(37);var Le=function(){var e=b(),t=f((function(e){return e.transactions.currentTablePage})),n=f((function(e){return e.transactions.totalAmountEntriesOfTheTable})),r=Math.ceil(n/10);Object(a.useEffect)((function(){t>r&&e(re(0===r?1:r))}),[r]);for(var c=[],i=function(e){return e<1||e>r?"continue|newIteration":void c.push(Object(I.jsx)(Re.a.Item,{onClick:function(){return o(e)},active:e===t,children:e},e+"hgfh"))},s=t-3;s<=t+3;s++)i(s);function o(t){e(re(t))}return t<r-3&&r>3&&(t<r-4&&c.push(Object(I.jsx)(Re.a.Ellipsis,{},"Ellipsis")),c.push(Object(I.jsx)(Re.a.Item,{onClick:function(){return o(r)},children:r},r+"totalAmountOfPages"))),Object(I.jsxs)(Re.a,{children:[Object(I.jsx)(Re.a.First,{onClick:function(){return e(re(1))}}),Object(I.jsx)(Re.a.Prev,{onClick:function(){t>1&&e(re(t-1))}}),c,Object(I.jsx)(Re.a.Next,{onClick:function(){t<r&&e(re(t+1))}}),Object(I.jsx)(Re.a.Last,{onClick:function(){return e(re(r))}})]})},Be=n(123),De=n.n(Be);var Me=function(){return Object(I.jsxs)("div",{className:De.a["lds-grid"],children:[Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{})]})};var ze=function(e){return function(){var t=f((function(e){return e.transactions.transactionStatus}));return"initial"===t?Object(I.jsx)("div",{children:"Please import *.csv file to start work"}):"importing"===t?Object(I.jsx)("div",{children:Object(I.jsx)(Me,{})}):"imported"===t?Object(I.jsx)(e,{}):null}}((function(){return Object(I.jsxs)("div",{children:[Object(I.jsx)(Ie,{}),Object(I.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(I.jsx)(Le,{})})]})})),qe=n(72),We=n.n(qe);var He=function(){var e=b();return Object(I.jsxs)("div",{children:[Object(I.jsx)(Te.a,{className:We.a["react-select--inline"],classNamePrefix:We.a["react-select"],closeMenuOnSelect:!1,components:Object(Se.a)(),defaultValue:z,isMulti:!0,options:z,onChange:function(t){var n=null===t||void 0===t?void 0:t.map((function(e){return e.value}));e(ie(n))}}),Object(I.jsx)(Te.a,{className:We.a["react-select--inline"],classNamePrefix:We.a["react-select"],closeMenuOnSelect:!1,components:Object(Se.a)(),defaultValue:q,isMulti:!0,options:q,onChange:function(t){var n=null===t||void 0===t?void 0:t.map((function(e){return e.value}));e(se(n))}})]})};var Ue=function(){var e=b(),t=f((function(e){return e.fileBlob.fileRequested}));return Object(I.jsx)($.a,{variant:"primary",disabled:t,onClick:function(){e(fe())},children:t?"Exporting\u2026":"Export"})},Qe=n(97);var Ge=function(){var e=f((function(e){return e.fileBlob.filesList})).map((function(e,t){return Object(I.jsx)(Qe.a.Item,{action:!0,variant:"light",children:e},e+t)}));return Object(I.jsx)(Qe.a,{className:"mh-100",children:e})},Je=n(124),Ve=n.n(Je),Ye=Y((function(){return Object(I.jsxs)("div",{className:Ve.a.container,children:[Object(I.jsx)("header",{children:"Application Header"}),Object(I.jsxs)("nav",{children:[Object(I.jsx)("section",{children:Object(I.jsx)(He,{})}),Object(I.jsxs)("section",{children:[Object(I.jsx)(xe,{})," ",Object(I.jsx)(Ue,{})]})]}),Object(I.jsx)("main",{children:Object(I.jsx)(ze,{})}),Object(I.jsx)("aside",{children:Object(I.jsx)(Ge,{})})]})}));var Ke=function(){return Object(I.jsx)("div",{className:s.a.App,children:Object(I.jsx)(Ye,{})})},Ze=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,196)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},Xe=n(126),$e=n(125),et=n(24),tt=n.n(et),nt=n(32),at=n(58),rt=tt.a.mark(lt),ct=tt.a.mark(ut),it=tt.a.mark(dt),st=tt.a.mark(jt),ot=tt.a.mark(bt);function lt(e){var t;return tt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(nt.a)(ft,e.payload);case 3:if(0===(t=n.sent).resultCode){n.next=6;break}throw new Error(t.messages[0]);case 6:return n.next=8,Object(nt.b)(k());case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(nt.b)(F(n.t0.message));case 14:case"end":return n.stop()}}),rt,null,[[0,10]])}function ut(e){var t,n,a,r,c;return tt.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t=new at.b.Entity("Pending",{},{idAttribute:"TransactionId"}),n=new at.b.Entity("Completed",{},{idAttribute:"TransactionId"}),a=new at.b.Entity("Cancelled",{},{idAttribute:"TransactionId"}),r=new at.b.Array({Pending:t,Completed:n,Cancelled:a},(function(e){return"".concat(e.Status)})),c=Object(at.a)(e.payload,r),["Completed","Cancelled","Pending"].forEach((function(e){c.entities[e]||(c.entities[e]={})})),i.next=10,Object(nt.b)(ae(c.entities));case 10:i.next=16;break;case 12:return i.prev=12,i.t0=i.catch(0),i.next=16,alert(i.t0.message);case 16:case"end":return i.stop()}}),ct,null,[[0,12]])}function dt(e){return tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(nt.b)(le(e.payload));case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,alert(t.t0.message);case 9:case"end":return t.stop()}}),it,null,[[0,5]])}function jt(e){return tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(nt.b)(ue(e.payload));case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,alert(t.t0.message);case 9:case"end":return t.stop()}}),st,null,[[0,5]])}function bt(){return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(nt.c)(L,lt);case 2:return e.next=4,Object(nt.c)(B,ut);case 4:return e.next=6,Object(nt.c)(D,dt);case 6:return e.next=8,Object(nt.c)(M,jt);case 8:case"end":return e.stop()}}),ot)}function ft(e){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object($e.a)(tt.a.mark((function e(t){var n;return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("auth",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pt=bt,ht=Object(Xe.a)(),xt=Object(E.a)({reducer:{authorization:N,transactions:de,fileBlob:he},middleware:function(e){return e().concat(ht)}});ht.run(pt),c.a.render(Object(I.jsx)(j.a,{store:xt,children:Object(I.jsx)(Ke,{})}),document.getElementById("root")),Ze()},72:function(e,t,n){e.exports={"react-select--inline":"Dropdowns_react-select--inline__1nQd6","react-select__control":"Dropdowns_react-select__control__1NkYD","react-select__single-value":"Dropdowns_react-select__single-value__3HlHa"}}},[[190,1,2]]]);
//# sourceMappingURL=main.fb04f65c.chunk.js.map